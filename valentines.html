<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>Where to take your Valentine!</title>

    <style>
      html,
      body,
      #map {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 14px;
        color: #323232;
      }

      #basemaps-wrapper {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0);
      }
      #basemaps {
        font-size: 16px;
        padding: 4px 8px;
      }

    </style>
    <script src=https://unpkg.com/maplibre-gl@2.1.9/dist/maplibre-gl.js></script>
    <link href=https://unpkg.com/maplibre-gl@2.1.9/dist/maplibre-gl.css rel="stylesheet" />

  </head>

  <body>
    <div id="map"></div>

    <div id="basemaps-wrapper">

      <select id="basemaps">
        <option value="ArcGIS:Streets">Streets</option>
        <option value="ArcGIS:Navigation">Navigation</option>
        <option value="ArcGIS:Topographic">Topographic</option>
        <option value="ArcGIS:LightGray">Light Gray</option>
        <option value="ArcGIS:DarkGray">Dark gray</option>
        <option value="ArcGIS:StreetsRelief">Streets Relief</option>
        <option value="ArcGIS:Imagery:Standard">Imagery</option>
        <option value="ArcGIS:ChartedTerritory">ChartedTerritory</option>
        <option value="ArcGIS:ColoredPencil">ColoredPencil</option>
        <option value="ArcGIS:Nova">Nova</option>
        <option value="ArcGIS:Midcentury">Midcentury</option>
        <option value="OSM:Standard">OSM</option>
        <option value="OSM:Streets">OSM:Streets</option>
      </select>

    </div>

    <script>
      const apiKey = "AAPK5c0502f82c794ca99bf884c40574a0d92_c8l7MdG8NWn18NxXY9rAutv3pBAmHtj5yNCFWF1fyuv0lrz6czmgfGrtenfx02;
      const basemapEnum = "ArcGIS:Streets";
      const map = new maplibregl.Map({
        container: "map", // the id of the div element
        style: `https://basemaps-api.arcgis.com/arcgis/rest/services/styles/${basemapEnum}?type=style&token=${apiKey}`,
        zoom: 12, // starting zoom
        center: [-79.38314949190969, 43.65309554868096], // starting location [longitude, latitude]
        attributionControl: false
      }).addControl(
        new maplibregl.AttributionControl({
          compact: true // reduces the copyright attributions view
        })
      );

      const baseUrl = "https://basemaps-api.arcgis.com/arcgis/rest/services/styles";
      const url = (name) => `${baseUrl}/${name}?type=style&token=${apiKey}`;

      const setBasemap = (name) => {
        // Instantiate the given basemap layer.
        map.setStyle(url(name));
      };

      setBasemap("ArcGIS:Streets");

      const basemapsSelectElement = document.querySelector("#basemaps");

      basemapsSelectElement.addEventListener("change", (e) => {
        setBasemap(e.target.value);
      });

    </script>

  </body>
</html>
